<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Redação ENEM com Correção</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    textarea { width: 100%; height: 200px; }
    .notas, .erros { margin-top: 20px; }
  </style>
</head>
<body>

  <h1>Redação ENEM - Simulador com Correção</h1>
  <textarea id="redacao" placeholder="Digite sua redação aqui..."></textarea><br>
  <button onclick="avaliarRedacao()">Avaliar Redação</button>

  <div class="erros" id="errosEncontrados"></div>
  <div class="notas" id="resultadoNotas"></div>

  <script>
    async function avaliarRedacao() {
      const texto = document.getElementById('redacao').value;

      // Requisição para a API do LanguageTool
      const response = await fetch("https://api.languagetool.org/v2/check", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: new URLSearchParams({
          text: texto,
          language: "pt-BR"
        })
      });

      const data = await response.json();

      const erros = data.matches;
      let errosHtml = "<h3>Erros Encontrados:</h3><ul>";
      erros.forEach(erro => {
        errosHtml += `<li><strong>${erro.message}</strong><br>
                      Contexto: ${erro.context.text}<br>
                      Sugestão: ${erro.replacements.map(rep => rep.value).join(", ")}</li><br>`;
      });
      errosHtml += "</ul>";
      document.getElementById('errosEncontrados').innerHTML = errosHtml;

      // Notas simuladas com base em erros
      const totalErros = erros.length;

      // Simulação simples
      const nota1 = Math.max(0, 200 - totalErros * 10); // norma culta penalizada por erros
      const nota2 = texto.includes('tema') ? 200 : 150; // verificação básica
      const nota3 = texto.includes('porque') ? 200 : 100;
      const nota4 = texto.includes('além disso') ? 200 : 150;
      const nota5 = texto.includes('governo') && texto.includes('sociedade') ? 200 : 100;

      const total = nota1 + nota2 + nota3 + nota4 + nota5;

      document.getElementById('resultadoNotas').innerHTML = `
        <h3>Notas simuladas:</h3>
        <ul>
          <li><strong>Competência 1:</strong> ${nota1}/200</li>
          <li><strong>Competência 2:</strong> ${nota2}/200</li>
          <li><strong>Competência 3:</strong> ${nota3}/200</li>
          <li><strong>Competência 4:</strong> ${nota4}/200</li>
          <li><strong>Competência 5:</strong> ${nota5}/200</li>
          <li><strong>Total:</strong> ${total}/1000</li>
        </ul>
      `;
    }
  </script>

</body>
</html>
